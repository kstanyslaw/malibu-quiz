<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      üèùÔ∏è Malibu quiz
    </ion-title>
    <ion-buttons slot="end">
      <ion-button [routerLink]="['/dashboard']">
        <ion-icon slot="icon-only" name="enter-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  @if (isQuestionsListLoading()) {
    <ion-card>
      <ion-card-header>
        <ion-card-title>
          <ion-skeleton-text [animated]="true" style="height: 2rem;"/>
          <ion-skeleton-text [animated]="true" style="height: 2rem; width: 30%;"/>
        </ion-card-title>
      </ion-card-header>

      <ion-card-content>
        <ion-list>
          <ion-item>
            <ion-skeleton-text [animated]="true" style="width: 80%"/>
          </ion-item>
          <ion-item>
            <ion-skeleton-text [animated]="true" style="width: 60%"/>
          </ion-item>
          <ion-item>
            <ion-skeleton-text [animated]="true" style="width: 70%"/>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>
  } @else if (isQuestionsListEmpty) {
    <div id="container">
      <strong>–ó–¥–µ—Å—å –ø–æ–∫–∞ —á—Ç–æ –Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞</strong>
      <p>–ù–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ –∏—Ö —Å–∫–æ—Ä–æ –¥–æ–±–∞–≤–∏—Ç, –∞ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å <a target="_blank" rel="noopener noreferrer" href="https://uzmalibu.com/">—Å–∞–π—Ç Malibu Travel</a></p>
    </div>
  } @else if (quizFinished()) {
    <div id="container">
      <h1>üéâ</h1>
      <strong>–°–ø–∞—Å–∏–±–æ –∑–∞ –í–∞—à–∏ –æ—Ç–≤–µ—Ç—ã</strong>
      <p>–ö–æ–º–∞–Ω–¥–∞ Malibu Travel –±–ª–∞–≥–æ–¥–∞—Ä–Ω–∞ –∑–∞ —É–¥–µ–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è</p>
    </div>
  } @else {
    @if (currentQuestionIndex() === -1) {
      <app-first-question-card
        (nameChange)="updateName($event)"
        (phoneChange)="updatePhone($event)"
        [name]="name()"
        [phone]="phone()"
      />
    } @else if(currentQuestionIndex() < questions().length) {
      <app-question-card
        [question]="currentQuestion"
        (answerChange)="updateAnswer($event)"
        [initialAnswer]="currentAnswer"
      />
    }

    <!-- Next Button  -->
    <ion-fab
      slot="fixed"
      vertical="bottom"
      horizontal="end"
      (click)="nextQuestion()"
      [style]="currentQuestionIndex() < questions().length - 1 ? 'display: flex;' : 'display: none;'"
    >
      <ion-label>–°–ª–µ–¥—É—é—â–∏–π</ion-label>
      <ion-fab-button>
        <ion-icon name="arrow-forward-outline"></ion-icon>
      </ion-fab-button>
    </ion-fab>

    <!-- Prev Button  -->
    <ion-fab
      slot="fixed"
      vertical="bottom"
      horizontal="start"
      (click)="prevQuestion()"
      [style]="currentQuestionIndex() > -1 ? 'display: flex;' : 'display: none;'"
    >
      <ion-fab-button>
        <ion-icon name="arrow-back-outline"></ion-icon>
      </ion-fab-button>
      <ion-label>–ü—Ä–µ–¥—ã–¥—É—â–∏–π</ion-label>
    </ion-fab>

    <!-- Send Answers Button  -->
     <ion-fab
      slot="fixed"
      vertical="bottom"
      horizontal="end"
      (click)="sendAnswers()"
      [style]="currentQuestionIndex() === questions().length - 1 ? 'display: flex;' : 'display: none;'"
    >
    <ion-label>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—ã</ion-label>
    <ion-fab-button color="success">
      <ion-icon name="mail-open-outline"></ion-icon>
    </ion-fab-button>
    </ion-fab>
  }
</ion-content>
